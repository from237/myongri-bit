<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>명리BTI - 나와 우주가 만나는 순간</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />
    <style>
        /* 기존 스타일 유지 */
    </style>
</head>
<body>
    <div class="container">
        <!-- Main Page -->
        <div id="main-page" class="page active">
            <header>
                <h1>명리BTI</h1>
                <p class="subtitle">MBTI와 사주팔자로 알아보는<br />진짜 내 모습 이야기</p>
            </header>
            <main>
                <div class="main-image">
                    <img
                      src="https://placehold.co/200x200/1a1a2e/e94560?text=✨"
                      alt="명리BTI"
                    />
                </div>
                <div class="intro-text">
                    <p>MBTI 결과만으로 부족했다면,<br />수천 년의 지혜와 만나 보세요!</p>
                </div>
            </main>
            <footer>
                <button id="start-btn" class="btn">테스트 시작</button>
            </footer>
        </div>

        <!-- Test Page -->
        <div id="test-page" class="page">
            <header>
                <div class="progress-bar">
                    <div id="progress" class="progress"></div>
                </div>
            </header>
            <main>
                <div id="question-container" class="question-card"></div>
            </main>
            <footer></footer>
        </div>

        <!-- Loading Page -->
        <div id="loading-page" class="page">
            <main>
                <div class="loader"></div>
                <p>당신의 우주를 분석하는 중...</p>
            </main>
        </div>

        <!-- Result Page -->
        <div id="result-page" class="page">
            <header>
                <h2 id="result-title"></h2>
            </header>
            <main>
                <section class="result-section">
                    <h3 id="result-synergy-title"></h3>
                    <p id="result-synergy-text"></p>
                </section>
                <section class="result-section">
                    <h3 id="result-clash-title"></h3>
                    <p id="result-clash-text"></p>
                </section>
                <section class="result-section">
                    <h3 id="result-advice-title"></h3>
                    <p id="result-advice-text"></p>
                </section>
                <section class="result-section">
                    <h3 id="result-gunghap-title"></h3>
                    <p id="result-gunghap-text"></p>
                </section>
            </main>
            <footer>
                <a href="#" id="restart-btn" class="restart-button"
                  >테스트 다시하기</a
                >
            </footer>
        </div>
    </div>
    <script>
        // 사주(간지) 계산
        function calculateGanzhi(birthdate, birthtime) {
            const [y, m] = birthdate.split("-").map(Number);
            const [h] = birthtime.split(":").map(Number);
            const heavenlyStems = ["갑", "을", "병", "정", "무", "기", "경", "신", "임", "계"];
            const earthlyBranches = [
                "자",
                "축",
                "인",
                "묘",
                "진",
                "사",
                "오",
                "미",
                "신",
                "유",
                "술",
                "해",
            ];
            const yearIndex = (y - 4) % 60;
            const yearGanzhi = heavenlyStems[yearIndex % 10] + earthlyBranches[yearIndex % 12];
            const monthIndex = (yearIndex % 5) * 12 + (m + 1);
            const monthGanzhi =
                heavenlyStems[monthIndex % 10] + earthlyBranches[monthIndex % 12];
            const dayIndex =
                (new Date(birthdate).getTime() / (1000 * 60 * 60 * 24) + 47) % 60;
            const dayGanzhi =
                heavenlyStems[Math.floor(dayIndex) % 10] +
                earthlyBranches[Math.floor(dayIndex) % 12];
            const hourBranch = earthlyBranches[Math.floor(((h + 1) % 24) / 2)];
            const hourStemIndex =
                (Math.floor(dayIndex) * 12 + Math.floor(((h + 1) % 24) / 2)) % 10;
            const hourGanzhi = heavenlyStems[hourStemIndex] + hourBranch;
            return { yearGanzhi, monthGanzhi, dayGanzhi, hourGanzhi };
        }

        // MBTI 10문항
        const questions = [
            { q: "여행을 떠날 때 당신은?", a: [
                    { text: "즉흥적으로 장소 보고 결정", type: "E" },
                    { text: "사전에 일정·숙소 다 계획", type: "I" },
                ] },
            { q: "청소 스타일은?", a: [
                    { text: "구석구석 한 번에 몰아서", type: "S" },
                    { text: "평소 조금씩 자주", type: "N" },
                ] },
            { q: "쇼핑할 때 당신은?", a: [
                    { text: "가격·스펙 비교 후 합리적 구매", type: "T" },
                    { text: "감성·브랜드 이미지 보고 결정", type: "F" },
                ] },
            { q: "업무 처리 스타일은?", a: [
                    { text: "체계적으로 To-do 작성 후 순서대로", type: "J" },
                    { text: "우선순위가 바뀌면 유연하게 대응", type: "P" },
                ] },
            { q: "친구 모임에서 당신은?", a: [
                    { text: "먼저 분위기 띄우는 편", type: "E" },
                    { text: "뒤에서 관찰·공감하는 편", type: "I" },
                ] },
            { q: "새 정보 접할 때?", a: [
                    { text: "구체적 데이터부터 살핀다", type: "S" },
                    { text: "전체 콘셉트·비전부터 그린다", type: "N" },
                ] },
            { q: "갈등 상황에서?", a: [
                    { text: "논리적 해결책 제시", type: "T" },
                    { text: "감정·관계 고려해 조율", type: "F" },
                ] },
            { q: "마감이 다가오면?", a: [
                    { text: "미리 계획 세워서 하나씩", type: "J" },
                    { text: "마지막에 집중력 발휘", type: "P" },
                ] },
            { q: "위기 대처 시 당신은?", a: [
                    { text: "바로 주변에 도움 요청", type: "E" },
                    { text: "혼자 헤쳐 나갈 준비", type: "I" },
                ] },
            { q: "새 프로젝트 시작 전?", a: [
                    { text: "과거 사례·매뉴얼 검토", type: "S" },
                    { text: "새로운 혁신 아이디어 구상", type: "N" },
                ] },
        ];

        // 생년월일 입력 질문
        const birthQuestion = {
            q: "거의 다 왔어요!",
            sub_q: "생년월일과 시간을 알려주세요.",
        };

        // 모든 조합 매핑
        const resultsData = {
            'ISTJ_정화': { /* ... */ },
            'ISFJ_기토': { /* ... */ },
            'INFJ_을목': { /* ... */ },
            'INTJ_경금': { /* ... */ },
            'ISTP_임수': { /* ... */ },
            'ENFP_갑목': { /* ... */ },
            'ESFP_정화': { /* ... */ },
            'ESTP_정화': { /* ... */ },
            'ESFJ_정화': { /* ... */ },
            'ESTJ_정화': { /* ... */ },
            'ENTP_정화': { /* ... */ },
            'ENTJ_정화': { /* ... */ }
        };

        // 상태, DOM, 로직 (이전 코드 그대로 유지)
    </script>
</body>
</html>
