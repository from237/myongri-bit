<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëª…ë¦¬BTI - ë‚˜ì™€ ìš°ì£¼ê°€ ë§Œë‚˜ëŠ” ìˆœê°„</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #1a1a2e;
            --primary-color: #16213e;
            --secondary-color: #0f3460;
            --accent-color: #e94560;
            --text-color: #dcdcdc;
            --light-text-color: #a4a4b3;
            --card-bg: #1f2847;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { height: 100%; width: 100%; }
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex; justify-content: center; align-items: center;
            padding: 1rem;
        }
        .container { width: 100%; max-width: 480px; height: 100%; max-height: 800px;
            background-color: var(--primary-color); border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            display: flex; flex-direction: column; overflow: hidden;
        }
        .page { display: none; flex-direction: column; justify-content: space-between;
            align-items: center; text-align: center; padding: 2rem;
            height: 100%; overflow-y: auto; animation: fadeIn 0.5s ease-in-out;
        }
        .page.active { display: flex; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); } }
        header, main, footer { width: 100%; }
        .btn { background-color: var(--accent-color); color: white; border: none;
            border-radius: 50px; padding: 1rem 2rem; font-size: 1.1rem;
            font-weight: 700; cursor: pointer; transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(233,69,96,0.4);
        }
        .btn:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(233,69,96,0.6); }
        /* Main page */
        #main-page .subtitle { font-size: 1.2rem; color: var(--light-text-color);
            margin-top: 0.5rem; line-height: 1.6; }
        #main-page .main-image { margin: 3rem 0; animation: float 3s ease-in-out infinite; }
        @keyframes float { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
        #main-page .intro-text p { margin-bottom: 1.5rem; font-size: 1.1rem; line-height: 1.7; }
        /* Test page */
        #test-page .progress-bar { width: 100%; height: 10px; background-color: var(--secondary-color);
            border-radius: 5px; margin: 1rem 0 2rem; overflow: hidden; }
        #test-page .progress { width: 0%; height: 100%; background-color: var(--accent-color);
            transition: width 0.4s ease-in-out; }
        #test-page .question-card { background-color: var(--card-bg);
            padding: 2rem; border-radius: 15px; width: 100%; }
        #test-page h3 { margin-bottom: 1.5rem; font-size: 1.3rem; color: var(--text-color); }
        #test-page .answer-btn { display: block; width: 100%; background-color: var(--secondary-color);
            color: var(--text-color); border: 1px solid var(--secondary-color);
            border-radius: 10px; padding: 1rem; margin-bottom: 1rem;
            font-size: 1rem; cursor: pointer; transition: all 0.2s ease;
            text-align: left; }
        #test-page .answer-btn:hover { background-color: var(--accent-color);
            border-color: var(--accent-color); }
        #test-page .birth-input { margin-bottom: 1rem; }
        #test-page .birth-input label { display: block; margin-bottom: 0.5rem; font-weight: 500; }
        #test-page .birth-input input { width: 100%; padding: 0.8rem; border-radius: 8px;
            border: 1px solid var(--secondary-color); background-color: var(--bg-color);
            color: var(--text-color); font-size: 1rem; }
        /* Loading page */
        #loading-page .loader { border: 8px solid var(--secondary-color);
            border-top: 8px solid var(--accent-color); border-radius: 50%; width: 80px;
            height: 80px; animation: spin 1s linear infinite; margin-bottom: 2rem; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        #loading-page p { font-size: 1.2rem; color: var(--light-text-color); }
        /* Result page */
        #result-page { justify-content: flex-start; }
        #result-page header { margin-bottom: 1.5rem; }
        #result-page #result-title { color: var(--accent-color);
            font-size: 1.5rem; font-weight: 700; text-align: center; }
        .result-section { background-color: var(--card-bg);
            border-radius: 15px; padding: 1.5rem; margin-bottom: 1rem;
            text-align: left; width: 100%; }
        .result-section h3 { font-size: 1.2rem; color: var(--accent-color);
            margin-bottom: 0.8rem; }
        .result-section p { font-size: 1rem; line-height: 1.7;
            color: var(--light-text-color); white-space: pre-line; }
        .restart-button { display: inline-block; margin-top: 1.5rem; background: none;
            border: 1px solid var(--accent-color); color: var(--accent-color);
            padding: 0.8rem 1.5rem; border-radius: 50px; text-decoration: none;
            font-weight: 500; text-align: center; }
    </style>
</head>
<body>
    <div class="container">
        <!-- Main Page -->
        <div id="main-page" class="page active">
            <header>
                <h1>ëª…ë¦¬BTI</h1>
                <p class="subtitle">MBTIì™€ ì‚¬ì£¼íŒ”ìë¡œ ì•Œì•„ë³´ëŠ”<br>ì§„ì§œ ë‚´ ëª¨ìŠµ ì´ì•¼ê¸°</p>
            </header>
            <main>
                <div class="main-image">
                    <img src="https://placehold.co/200x200/1a1a2e/e94560?text=âœ¨" alt="ëª…ë¦¬BTI ëŒ€í‘œ ì´ë¯¸ì§€">
                </div>
                <div class="intro-text">
                    <p>MBTI ê²°ê³¼ë§Œìœ¼ë¡œ ë¶€ì¡±í–ˆë‹¤ë©´,<br>ìˆ˜ì²œ ë…„ì˜ ì§€í˜œê°€ ë‹´ê¸´ ì‚¬ì£¼ì™€ ë§Œë‚˜ ë³´ì„¸ìš”!</p>
                </div>
            </main>
            <footer>
                <button id="start-btn" class="btn">í…ŒìŠ¤íŠ¸ ì‹œì‘</button>
            </footer>
        </div>
        <!-- Test Page -->
        <div id="test-page" class="page">
            <header>
                <div class="progress-bar"><div id="progress" class="progress"></div></div>
            </header>
            <main>
                <div id="question-container" class="question-card"></div>
            </main>
            <footer></footer>
        </div>
        <!-- Loading Page -->
        <div id="loading-page" class="page">
            <main>
                <div class="loader"></div>
                <p>ë‹¹ì‹ ì˜ ìš°ì£¼ë¥¼ ë¶„ì„í•˜ëŠ” ì¤‘...</p>
            </main>
        </div>
        <!-- Result Page -->
        <div id="result-page" class="page">
            <header>
                <h2 id="result-title"></h2>
            </header>
            <main>
                <section class="result-section">
                    <h3 id="result-synergy-title"></h3>
                    <p id="result-synergy-text"></p>
                </section>
                <section class="result-section">
                    <h3 id="result-clash-title"></h3>
                    <p id="result-clash-text"></p>
                </section>
                <section class="result-section">
                    <h3 id="result-advice-title"></h3>
                    <p id="result-advice-text"></p>
                </section>
                <section class="result-section">
                    <h3 id="result-gunghap-title"></h3>
                    <p id="result-gunghap-text"></p>
                </section>
            </main>
            <footer>
                <a href="#" id="restart-btn" class="restart-button">í…ŒìŠ¤íŠ¸ ë‹¤ì‹œí•˜ê¸°</a>
            </footer>
        </div>
    </div>
    <script>
        // ì‚¬ì£¼(ê°„ì§€) ê³„ì‚°
        function calculateGanzhi(birthdate, birthtime) {
            const [y,m,d] = birthdate.split('-').map(Number);
            const [h] = birthtime.split(':').map(Number);
            const heavenlyStems = ['ê°‘','ì„','ë³‘','ì •','ë¬´','ê¸°','ê²½','ì‹ ','ì„','ê³„'];
            const earthlyBranches = ['ì','ì¶•','ì¸','ë¬˜','ì§„','ì‚¬','ì˜¤','ë¯¸','ì‹ ','ìœ ','ìˆ ','í•´'];
            const yearIndex = (y - 4) % 60;
            const yearGanzhi = heavenlyStems[yearIndex % 10] + earthlyBranches[yearIndex % 12];
            const monthIndex = (yearIndex % 5) * 12 + (m + 1);
            const monthGanzhi = heavenlyStems[monthIndex % 10] + earthlyBranches[monthIndex % 12];
            const dayIndex = (new Date(birthdate).getTime()/(1000*60*60*24) + 47) % 60;
            const dayGanzhi = heavenlyStems[Math.floor(dayIndex)%10] + earthlyBranches[Math.floor(dayIndex)%12];
            const hourBranch = earthlyBranches[Math.floor(((h + 1) % 24)/2)];
            const hourStemIndex = (Math.floor(dayIndex)*12 + Math.floor(((h + 1) % 24)/2)) % 10;
            const hourGanzhi = heavenlyStems[hourStemIndex] + hourBranch;
            return { yearGanzhi, monthGanzhi, dayGanzhi, hourGanzhi };
        }
        // ë°ì´í„° ì˜ì—­
        const questions = [
            { q: "ë“œë””ì–´ ì£¼ë§! ë‚´ ìƒíƒœëŠ”?", a:[{text:"ì´ë²ˆ ì£¼ í•«í”Œ ì–´ë””? ë‹¹ì¥ ì•½ì† ì¡ì•„ì•¼ì§€!",type:"E"},{text:"ì•„ë¬´ë„ ë‚  ì°¾ì§€ ë§ˆâ€¦ ì¹¨ëŒ€ë‘ í•©ì²´í•´ì•¼ í•´.",type:"I"}]},
            { q: "ë‚¯ì„  íŒŒí‹°ì— ê°”ì„ ë•Œ ë‚˜ëŠ”?", a:[{text:"ì˜¤íˆë ¤ ì¢‹ì•„! ìƒˆë¡œìš´ ì‚¬ëŒë“¤ê³¼ ì—ë„ˆì§€ í’€ì¶©ì „!",type:"E"},{text:"ì•„ëŠ” ì–¼êµ´ ì–´ë”” ì—†ë‚˜... ì¡°ìš©íˆ êµ¬ì„ì—ì„œ í°ë§Œ ë³¸ë‹¤.",type:"I"}]},
            { q: "ë§›ì§‘ ì–˜ê¸°ë¥¼ í•  ë•Œ ë‚˜ëŠ”?", a:[{text:"ê±°ê¸° í‰ì  4.5ì , ì‹œê·¸ë‹ˆì²˜ ë©”ë‰´ëŠ” OOO!",type:"S"},{text:"ë­”ê°€ ì•„ëŠ‘í•˜ê³  ê°ì„±ì ì¸ ë¶„ìœ„ê¸°? ê°€ë³´ê³  ì‹¶ì–´!",type:"N"}]},
            { q: "ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•  ë•Œ?", a:[{text:"ì¼ë‹¨ í•  ì¼ ë¦¬ìŠ¤íŠ¸ì—…ë¶€í„°! êµ¬ì²´ì ì¸ ê³„íšì´ ë¨¼ì €!",type:"S"},{text:"ì´ê±¸ë¡œ ë­˜ í•  ìˆ˜ ìˆì„ê¹Œ? ì „ì²´ì ì¸ í° ê·¸ë¦¼ë¶€í„°!",type:"N"}]},
            { q: "ì¹œêµ¬ê°€ í—¤ì–´ì¡Œë‹¤ê³  ìš¸ ë•Œ ë‚˜ì˜ ì²« ë§ˆë””ëŠ”?", a:[{text:"ì™œ? ë¬´ìŠ¨ ì¼ì´ì—ˆëŠ”ë°? ê°ê´€ì  ìƒí™© íŒŒì•…ë¶€í„°.",type:"T"},{text:"ì•„ì´ê³ , ì–´ë–¡í•´... ë„ˆë¬´ í˜ë“¤ê² ë‹¤. ì¼ë‹¨ ê´œì°®ì•„?",type:"F"}]},
            { q: "ë‚´ê°€ ë” ë“£ê³  ì‹¶ì€ ì¹­ì°¬ì€?", a:[{text:"ì¼ ì§„ì§œ ë˜‘ ë¶€ëŸ¬ì§€ê²Œ ì˜í•œë‹¤! ì™„ì „ ìŠ¤ë§ˆíŠ¸í•´!",type:"T"},{text:"ë„ˆë‘ ìˆìœ¼ë©´ ë§ˆìŒì´ í¸ì•ˆí•´ì ¸. ì •ë§ ë”°ëœ»í•œ ì‚¬ëŒì´ì•¼.",type:"F"}]},
            { q: "í•´ì™¸ì—¬í–‰ì„ ê°„ë‹¤ë©´ ë‚˜ì˜ ìŠ¤íƒ€ì¼ì€?", a:[{text:"ë¶„ ë‹¨ìœ„ë¡œ ì§œì¸ ì—‘ì…€ ì‹œíŠ¸! ì™„ë²½í•œ ê³„íš!",type:"J"},{text:"í•­ê³µê¶Œê³¼ ìˆ™ì†Œë§Œ ì˜ˆì•½í•˜ê³ , ë‚˜ë¨¸ì§„ ë°œê¸¸ ë‹¿ëŠ” ëŒ€ë¡œ~",type:"P"}]},
            { q: "ì˜¤ëŠ˜ í•  ì¼ì„ ë‚´ì¼ë¡œ ë¯¸ë£° ìˆ˜ ìˆë‹¤ë©´?", a:[{text:"ì°ì°í•´ì„œ ì•ˆë¼. ì˜¤ëŠ˜ ì¼ì€ ì˜¤ëŠ˜ ëë‚´ì•¼ì§€.",type:"J"},{text:"ë‚´ì¼ì˜ ë‚´ê°€ ì•Œì•„ì„œ í•˜ê² ì§€! ì¼ë‹¨ ì¢€ ì‰¬ì.",type:"P"}]}  
        ];
        const birthQuestion = { q:"ê±°ì˜ ë‹¤ ì™”ì–´ìš”!", sub_q:"ë” ê¹Šì€ ë¶„ì„ì„ ìœ„í•´ ìƒë…„ì›”ì¼ê³¼ ì‹œê°„ì„ ì•Œë ¤ì£¼ì„¸ìš”." };
        const resultsData = {
            'ISTJ_ì •í™”': { title:'í˜„ì‹¤ì£¼ì˜ íšƒë¶ˆ, ISTJ x ì •í™”', synergy:{title:'ğŸ”¥ ì‹œë„ˆì§€: ì™„ë²½ì£¼ì˜ í•´ê²°ì‚¬',text:'...'},clash:{title:'ğŸ’§ í´ë˜ì‹œ: ë‚´ ì•ˆì˜ ë¶ˆê³¼ ë¬¼',text:'...'},advice:{title:'ğŸ’¡ ì¡°ì–¸: ìœ ì—°ì„± ê¸°ë¥´ê¸°',text:'...'},gunghap:{title:'ğŸ’– í™˜ìƒì˜ ê¶í•©: ENFP, å£¬æ°´',text:'...'} },
            'ENFP_ê°‘ëª©': { title:'ììœ ë¡œìš´ ê±°ëª©, ENFP x ê°‘ëª©', synergy:{title:'ğŸš€ ì‹œë„ˆì§€: ì°½ì˜ë ¥ ë°œì „ì†Œ',text:'...'},clash:{title:'ğŸŒªï¸ í´ë˜ì‹œ: ìš©ë‘ì‚¬ë¯¸ í…ì…˜',text:'...'},advice:{title:'âœ‚ï¸ ì¡°ì–¸: ê°€ì§€ì¹˜ê¸°',text:'...'},gunghap:{title:'ğŸ’– í™˜ìƒì˜ ê¶í•©: INTJ, æˆŠåœŸ',text:'...'} },
            'INTJ_ê²½ê¸ˆ': { title:'ëƒ‰ì²  ì „ëµê°€, INTJ x ê²½ê¸ˆ', synergy:{title:'ğŸ’ ì‹œë„ˆì§€: ë¶„ì„ë ¥',text:'...'},clash:{title:'ğŸ§Š í´ë˜ì‹œ: ì–¼ìŒ ê°™ì€ ì™„ë²½ì£¼ì˜',text:'...'},advice:{title:'â˜€ï¸ ì¡°ì–¸: ë”°ëœ»í•¨',text:'...'},gunghap:{title:'ğŸ’– ê¶í•©: ENFP, ä¸ç«',text:'...'} },
            'ISFJ_ê¸°í† ': { title:'í—Œì‹  ì •ì›ì‚¬, ISFJ x ê¸°í† ', synergy:{title:'ğŸŒ± ì‹œë„ˆì§€: ì•ˆì •ê°',text:'...'},clash:{title:'ğŸ§± í´ë˜ì‹œ: ê±°ì ˆ ëª»í•˜ëŠ” í™ë²½',text:'...'},advice:{title:'ğŸŒ³ ì¡°ì–¸: ë‚´ ë‚˜ë¬´ ì‹¬ê¸°',text:'...'},gunghap:{title:'ğŸ’– ê¶í•©: ESTP, ç”²æœ¨',text:'...'} },
            'ISTP_ì„ìˆ˜': { title:'ë°”ë‹¤ íƒí—˜ê°€, ISTP x ì„ìˆ˜', synergy:{title:'ğŸŒŠ ì‹œë„ˆì§€: ì ì‘ë ¥',text:'...'},clash:{title:'â“ í´ë˜ì‹œ: ì•Œ ìˆ˜ ì—†ëŠ” ì‹¬í•´',text:'...'},advice:{title:'ğŸ§­ ì¡°ì–¸: ë‚˜ë§Œì˜ ë“±ëŒ€',text:'...'},gunghap:{title:'ğŸ’– ê¶í•©: ESTP, ä¸™ç«/ä¸ç«',text:'...'} },
            'INFJ_ì„ëª©': { title:'ì¸ë™ì´ˆ, INFJ x ì„ëª©', synergy:{title:'ë©êµ´ í¬ì¸íŠ¸: ê³µê°ë ¥',text:'...'},clash:{title:'ğŸ’” ìƒì²˜ í¬ì¸íŠ¸: ì—¬ë¦° ì¤„ê¸°',text:'...'},advice:{title:'â˜€ï¸ ì¡°ì–¸: íƒœì–‘ í–¥í•˜ê¸°',text:'...'},gunghap:{title:'ğŸ’– ê¶í•©: ENTP, ä¸™ç«',text:'...'} }
        };
        // ìƒíƒœ ë³€ìˆ˜ & DOM
        let currentQuestionIndex=0; let userAnswers={E:0,I:0,S:0,N:0,T:0,F:0,J:0,P:0};
        const pages=document.querySelectorAll('.page'); const startBtn=document.getElementById('start-btn');
        const restartBtn=document.getElementById('restart-btn'); const questionContainer=document.getElementById('question-container');
        const progressBar=document.getElementById('progress');
        // í˜ì´ì§€ ì „í™˜ & ì§ˆë¬¸ í‘œì‹œ
        function showPage(id){pages.forEach(p=>p.classList.remove('active'));document.getElementById(id).classList.add('active');}
        function displayQuestion(){if(currentQuestionIndex<questions.length){const q=questions[currentQuestionIndex];
            questionContainer.innerHTML=`<h3>Q${currentQuestionIndex+1}. ${q.q}</h3>`+q.a.map(ans=>`<button class="answer-btn" data-type="${ans.type}">${ans.text}</button>`).join('');
            document.querySelectorAll('.answer-btn').forEach(btn=>btn.addEventListener('click',handleAnswer));} else displayBirthQuestion();updateProgressBar();}
        function displayBirthQuestion(){questionContainer.innerHTML=`<h3>${birthQuestion.q}</h3><p>${birthQuestion.sub_q}</p>`+
            `<div class="birth-input"><label>ìƒë…„ì›”ì¼</label><input type="date" id="birthdate"></div>`+
            `<div class="birth-input"><label>íƒœì–´ë‚œ ì‹œê°„</label><input type="time" id="birthtime"></div>`+
            `<button id="submit-btn" class="btn">ê²°ê³¼ ë¶„ì„í•˜ê¸°</button>`;
            document.getElementById('submit-btn').addEventListener('click',handleSubmit);updateProgressBar();}
        function handleAnswer(e){userAnswers[e.target.dataset.type]++;currentQuestionIndex++;displayQuestion();}
        function updateProgressBar(){const total=questions.length+1;progressBar.style.width=`${(currentQuestionIndex/total)*100}%`}
        function handleSubmit(){const birthdate=document.getElementById('birthdate').value;
            const birthtime=document.getElementById('birthtime').value;
            if(!birthdate||!birthtime){alert('ìƒë…„ì›”ì¼ê³¼ ì‹œê°„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');return;}showPage('loading-page');
            calculateAndShowResult(birthdate,birthtime);
        }
        function calculateAndShowResult(birthdate,birthtime){console.log('â–¶ calculateAndShowResult');
            // MBTI ê³„ì‚°
            let mbti=''; mbti+=userAnswers.E>userAnswers.I?'E':'I'; mbti+=userAnswers.S>userAnswers.N?'S':'N';
            mbti+=userAnswers.T>userAnswers.F?'T':'F'; mbti+=userAnswers.J>userAnswers.P?'J':'P';
            // ì‚¬ì£¼ ê°„ì§€ ê³„ì‚°
            const {yearGanzhi,monthGanzhi,dayGanzhi,hourGanzhi}=calculateGanzhi(birthdate,birthtime);
            // ì‚¬ì£¼ íƒ€ì… ë§¤í•‘
            let sajuType='ì •í™”'; switch(mbti){case 'ISTJ':sajuType='ì •í™”';break;case 'ENFP':sajuType='ê°‘ëª©';break;case 'INTJ':sajuType='ê²½ê¸ˆ';break;case 'ISFJ':sajuType='ê¸°í† ';break;case 'ISTP':sajuType='ì„ìˆ˜';break;case 'INFJ':sajuType='ì„ëª©';break;default:sajuType='ì •í™”';}
            const sajuInfo=`ìƒë…„ê°„ì§€: ${yearGanzhi}\nì›”ê°„ì§€: ${monthGanzhi}\nì¼ê°„ì§€: ${dayGanzhi}\nì‹œê°„ê°„ì§€: ${hourGanzhi}`;
            const resultKey=`${mbti}_${sajuType}`;
            let data=resultsData[resultKey]; if(!data){console.warn(`ê²°ê³¼ ë§¤í•‘ ì—†ìŒ: ${resultKey}`);data=resultsData['ISTJ_ì •í™”'];}
            // ê²°ê³¼ ë°”ì¸ë”©
            document.getElementById('result-title').innerText=data.title;
            document.getElementById('result-synergy-title').innerText=data.synergy.title;
            document.getElementById('result-synergy-text').innerText=data.synergy.text;
            document.getElementById('result-clash-title').innerText=data.clash.title;
            document.getElementById('result-clash-text').innerText=sajuInfo+'\n\n'+data.clash.text;
            document.getElementById('result-advice-title').innerText=data.advice.title;
            document.getElementById('result-advice-text').innerText=data.advice.text;
            document.getElementById('result-gunghap-title').innerText=data.gunghap.title;
            document.getElementById('result-gunghap-text').innerText=data.gunghap.text;
            showPage('result-page');
        }
        function resetTest(){currentQuestionIndex=0;userAnswers={E:0,I:0,S:0,N:0,T:0,F:0,J:0,P:0};progressBar.style.width='0%';showPage('main-page');}
        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        startBtn.addEventListener('click',()=>{showPage('test-page');displayQuestion();});
        restartBtn.addEventListener('click',e=>{e.preventDefault();resetTest();});
    </script>
</body>
</html>
